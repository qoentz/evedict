package view

import (
    "fmt"
    "github.com/qoentz/evedict/internal/llm"
)

templ PredictionFeed(predictions []llm.Prediction) {
    <div class="prediction-container">
        for _, p := range predictions {
            <div class="prediction-item">
                <div class="prediction-content">
                    <img src={ p.ImageURL } alt="Prediction image" class="prediction-image" />
                    <div class="prediction-details">
                        <h2 class="prediction-headline">{ p.Headline }</h2>
                        <p class="prediction-summary">{ p.Summary }</p>
                    </div> <!-- End of prediction-details -->
                </div> <!-- End of prediction-content -->

                <div class="outcomes-container">
                    <h3 class="outcomes-title">Outcomes</h3>
                    for _, outcome := range p.Outcomes {
                        <div class={ "outcome-item", confidenceClass(outcome.ConfidenceLevel) }>
                            <div class="percentage-display">
                                { fmt.Sprintf("%d", outcome.ConfidenceLevel) }%
                            </div>
                            <p class="outcome-content">{ outcome.Content }</p>
                        </div>
                    }
                </div>
            </div> <!-- End of prediction-item -->
        }
    </div> <!-- End of prediction-container -->
}

func confidenceClass(confidence int) string {
    if confidence >= 70 {
        return "high"
    } else if confidence >= 40 {
        return "medium"
    } else {
        return "low"
    }
}



